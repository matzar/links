(function(){function getParameterByName(name,url){url||(url=window.location.href);name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}function showMessage(seconds){document.getElementById("redirectInfo").innerHTML=document.getElementById("redirectInfo").innerHTML.replace(/\d+/,seconds)}function showError(error){document.getElementById("redirectInfo").innerHTML=error}function parseUrl(url){var r={},a=document.createElement("a");return a.href=url,["protocol","hostname","port","pathname","search","hash"].map(function(n){r[n]=a[n]}),r}function strEndsWith(str,suffix){return str.match(suffix+"$")==suffix}function isValidUrl(url,hostWhiteList){for(var urlParts=parseUrl(url),i=0;i<hostWhiteList.length;i++)if(strEndsWith(urlParts.hostname.toLowerCase(),hostWhiteList[i]))return!0;return!1}window.onload=function(){var hostWhiteList,redirectUrl,remainingSeconds;document.getElementById("redirectInfo")!=null&&(hostWhiteList=["microsoft.com","visualstudio.com","github.com"],redirectUrl=getParameterByName("redirectUrl",window.location.href),redirectUrl&&redirectUrl.length>0&&(isValidUrl(redirectUrl,hostWhiteList)?(document.getElementById("redirectInfo").innerHTML=document.getElementById("jumpInfo").innerHTML,remainingSeconds=1,showMessage(remainingSeconds),setInterval(function(){remainingSeconds>0?(remainingSeconds--,showMessage(remainingSeconds)):remainingSeconds==0&&(remainingSeconds--,window.location.href=redirectUrl)},1e3)):showError("XSS and Open Redirect Vulnerability Error!")))}})();